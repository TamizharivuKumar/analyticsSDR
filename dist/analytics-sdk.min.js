!function(e,t){function n(e){this.baseURL=e||"https://c639-2401-4900-1ce2-a051-616b-b07d-7cf4-d15f.ngrok-free.app",this.sessionId="xxxx-xxxx-4xxx-yxxx-xxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),this.scrollDepth=0,this.startTime=Date.now(),this.init()}function r(){return/Mobile|Android|iPhone|iPad/i.test(navigator.userAgent)?"Mobile":"Desktop"}function o(){const e=navigator.platform.toLowerCase();return e.includes("win")?"Windows":e.includes("mac")?"macOS":e.includes("linux")?"Linux":"Unknown"}function i(){return{browserName:navigator.userAgent,browserVersion:(navigator.userAgent.match(/(firefox|chrome|safari|msie|trident(?=\/))\/?\s*(\d+)/i)||[])[2]||"Unknown",osName:o(),screenResolution:`${e.screen.width}x${e.screen.height}`,language:navigator.language}}n.prototype.sendEvent=function(e){return fetch(this.baseURL+"/api/Event",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).catch((e=>{throw console.error("Error sending event:",e.message),e}))},n.prototype.init=function(){var n,o=this,s=(n=o.sessionId,{eventName:"page_view",timestamp:(new Date).toISOString(),properties:{pageUrl:e.location.href,pageTitle:t.title,referrerUrl:t.referrer||"Direct",sessionId:n,deviceType:r(),BrowserInfo:i()}});o.sendEvent(s).then((e=>{console.log("Page view event sent successfully:",e)})).catch((e=>{console.error("Failed to send page view event:",e)})),e.addEventListener("scroll",(function(){o.calculateScrollDepth()})),e.addEventListener("beforeunload",(function(){o.trackPageExit()}))},n.prototype.calculateScrollDepth=function(){var n=e.scrollY/(t.body.scrollHeight-e.innerHeight)*100;this.scrollDepth=Math.max(this.scrollDepth,Math.floor(n))},n.prototype.trackPageExit=function(){var n=Math.floor((Date.now()-this.startTime)/1e3),o=function(n,o,s){return{eventName:"page_exit",timestamp:(new Date).toISOString(),properties:{pageUrl:e.location.href,pageTitle:t.title,referrerUrl:t.referrer||"Direct",sessionId:n,timeOnPage:o,scrollDepth:s,deviceType:r(),BrowserInfo:i()}}}(this.sessionId,n,this.scrollDepth);this.sendEvent(o).then((e=>{console.log("Page exit event sent successfully:",e)})).catch((e=>{console.error("Failed to send page exit event:",e)}))},new n}(window,document);